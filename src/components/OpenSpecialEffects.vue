<script setup lang="ts">
import { ref, onMounted, onUnmounted } from 'vue'

const props = defineProps<{
    name: string,
}>()

const emit = defineEmits<{
    (e: 'cancel'): void
}>()

const timer = ref<ReturnType<typeof setTimeout> | null>(null)
const opened = ref<boolean>(false)
const openTip = ref<boolean>(false)

const delay = (timeout: number): Promise<void> => {
    return new Promise(resolve => {
        timer.value = setTimeout(() => {
            resolve()
        }, timeout)
    })
}
onMounted(async () => {
    await delay(800)
    opened.value = true
    await delay(100)
    openTip.value = true
})

onUnmounted(() => {
    if(timer.value)clearTimeout(timer.value)
    opened.value = false
    openTip.value = false
})

const close = () => {
    emit('cancel')
}


</script>

<template>
    <div class="container" >
        <IEpCircleCloseFilled class="close" @click="close" />
        <svg t="1716106589997" class="icon unopen" :style="{ 'display': opened? 'none': 'block' }" viewBox="0 0 1201 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
            p-id="2824">
            <path
                d="M1109.267692 698.722462c-9.216-272.285538-232.704-490.200615-507.214769-490.200616-274.530462 0-498.018462 217.915077-507.254154 490.200616h1014.488616z"
                fill="#0CB04A" p-id="2825"></path>
            <path
                d="M255.094154 503.532308a19.849846 19.849846 0 0 1-17.979077-28.416c58.486154-123.470769 184.497231-203.224615 321.024-203.224616a19.889231 19.889231 0 0 1 0 39.778462c-121.225846 0-233.137231 70.833231-285.065846 180.48a19.889231 19.889231 0 0 1-17.979077 11.362461z"
                fill="#EDEDED" p-id="2826"></path>
            <path
                d="M660.578462 211.987692a510.168615 510.168615 0 0 1 158.700307 145.762462c81.624615 115.554462-0.118154 275.121231-141.607384 275.121231H101.474462c-3.564308 21.543385-5.907692 43.480615-6.675693 65.851077h1014.488616c-8.566154-252.632615-201.629538-458.338462-448.708923-486.73477z"
                fill="#000000" opacity=".35" p-id="2827"></path>
            <path d="M1198.611692 1023.488H5.454769v-351.310769h1193.156923v351.310769z" fill="#FF3A2F" p-id="2828">
            </path>
            <path
                d="M1044.972308 672.177231v41.531077c0 134.734769-109.233231 243.948308-243.968 243.948307H5.474462v65.851077h1193.156923v-351.310769h-153.659077z"
                fill="#000000" opacity=".35" p-id="2829"></path>
            <path
                d="M708.135385 106.082462a106.082462 106.082462 0 1 1-212.184616 0 106.082462 106.082462 0 0 1 212.164923 0z"
                fill="#142A3B" p-id="2830"></path>
            <path d="M585.038769 84.125538a26.899692 26.899692 0 1 1-53.779692 0 26.899692 26.899692 0 0 1 53.76 0z"
                fill="#EDEDED" p-id="2831"></path>
            <path
                d="M625.486769 2.796308c23.473231 19.456 38.734769 48.462769 38.734769 81.32923a106.082462 106.082462 0 0 1-106.082461 106.082462c-8.073846 0-15.872-1.083077-23.433846-2.796308 18.353231 15.222154 41.629538 24.733538 67.347692 24.733539A105.984 105.984 0 1 0 625.486769 2.796308z"
                fill="#000000" opacity=".35" p-id="2832"></path>
        </svg>
        <svg t="1716106589997" class="icon opened" :style="{ 'display': opened? 'block': 'none' }"  viewBox="0 0 1201 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
            p-id="2824">
            <g transform="rotate(45 600 512) translate(0 -200)">
                <path
                    d="M1109.267692 698.722462c-9.216-272.285538-232.704-490.200615-507.214769-490.200616-274.530462 0-498.018462 217.915077-507.254154 490.200616h1014.488616z"
                    fill="#0CB04A" p-id="2825"></path>
                <path
                    d="M255.094154 503.532308a19.849846 19.849846 0 0 1-17.979077-28.416c58.486154-123.470769 184.497231-203.224615 321.024-203.224616a19.889231 19.889231 0 0 1 0 39.778462c-121.225846 0-233.137231 70.833231-285.065846 180.48a19.889231 19.889231 0 0 1-17.979077 11.362461z"
                    fill="#EDEDED" p-id="2826"></path>
                <path
                    d="M660.578462 211.987692a510.168615 510.168615 0 0 1 158.700307 145.762462c81.624615 115.554462-0.118154 275.121231-141.607384 275.121231H101.474462c-3.564308 21.543385-5.907692 43.480615-6.675693 65.851077h1014.488616c-8.566154-252.632615-201.629538-458.338462-448.708923-486.73477z"
                    fill="#000000" opacity=".35" p-id="2827"></path>
                <path
                    d="M708.135385 106.082462a106.082462 106.082462 0 1 1-212.184616 0 106.082462 106.082462 0 0 1 212.164923 0z"
                    fill="#142A3B" p-id="2830"></path>
                <path d="M585.038769 84.125538a26.899692 26.899692 0 1 1-53.779692 0 26.899692 26.899692 0 0 1 53.76 0z"
                    fill="#EDEDED" p-id="2831"></path>
                <path
                    d="M625.486769 2.796308c23.473231 19.456 38.734769 48.462769 38.734769 81.32923a106.082462 106.082462 0 0 1-106.082461 106.082462c-8.073846 0-15.872-1.083077-23.433846-2.796308 18.353231 15.222154 41.629538 24.733538 67.347692 24.733539A105.984 105.984 0 1 0 625.486769 2.796308z"
                    fill="#000000" opacity=".35" p-id="2832"></path>
            </g>
            <g transform="scale(.5) translate(0 500)">
                <path d="M673.53 70.728L698.418 64l19.768 16.546-28.531 23.238z" fill="#152B3C" p-id="53665"></path>
                <path d="M692.581 90.54L583.637 585.477 718.186 80.546z" fill="#152B3C" p-id="53666"></path>
                <path d="M692.581 90.54L583.637 585.477 673.53 70.728z" fill="#0DB14B" p-id="53667"></path>
                <path d="M834.907 122.766l25.724 1.683 13.368 22.037-34.491 12.774z" fill="#152B3C" p-id="53668"></path>
                <path d="M846.552 147.649L583.637 580.925l290.362-434.439z" fill="#152B3C" p-id="53669"></path>
                <path d="M846.552 147.649L583.637 580.925l251.27-458.159z" fill="#0DB14B" p-id="53670"></path>
                <path d="M607.474 849.492H416.557L358.471 960h307.082z" fill="#FF3B30" p-id="53671"></path>
                <path
                    d="M412.63 842.355l-26.223 49.887c43.233 22.791 91.304 35.591 142.007 35.591 38.219 0 74.916-7.32 109.209-20.639l-34.076-64.839H412.63z"
                    fill="#A82526" p-id="53672"></path>
                <path
                    d="M709.201 422.07c-1.826 0-3.606 0.102-5.412 0.149-19.837-10.166-46.557-16.44-76.043-16.44-40.262 0-75.397 11.663-94.765 29.044-18.797-7.962-42.414-12.753-68.143-12.753-1.828 0-3.606 0.102-5.411 0.149-19.838-10.166-46.559-16.44-76.044-16.44-43.559 0-81.131 13.64-99.195 33.421-52.674 4.599-92.944 29.23-92.944 59.013 0 33.057 49.555 59.853 110.684 59.853 40.262 0 75.397-11.663 94.765-29.044 18.797 7.965 42.414 12.753 68.144 12.753 1.826 0 3.607-0.099 5.411-0.146 19.837 10.162 46.559 16.437 76.043 16.437 40.262 0 75.397-11.663 94.766-29.044 18.797 7.965 42.414 12.753 68.144 12.753 61.128 0 110.684-26.797 110.684-59.853s-49.556-59.852-110.684-59.852z"
                    fill="#FCB814" p-id="53673"></path>
                <path
                    d="M852.425 529.406c0 215.574-152.412 390.327-340.404 390.327-188.003 0-340.411-174.753-340.411-390.327h680.815z"
                    fill="#FF3B30" p-id="53674"></path>
                <path
                    d="M423.309 857.612a14.81 14.81 0 0 1-8.21-2.472c-90.701-59.885-152.242-161.985-168.853-280.123-1.153-8.167 4.543-15.72 12.71-16.866 8.173-1.189 15.713 4.535 16.866 12.71 15.414 109.66 72.18 204.188 155.728 259.358 6.883 4.543 8.779 13.81 4.237 20.685-2.875 4.353-7.629 6.708-12.478 6.708z"
                    fill="#FFFFFF" p-id="53675"></path>
                <path
                    d="M228.596 529.406h-56.991c0 167.407 91.922 310.141 221.03 365.583L358.471 960h25.705l28.436-65.011c-107.484-55.441-184.016-198.175-184.016-365.583zM852.419 529.406h-56.998c0 2.77-0.081 5.515-0.118 8.261H237.65l556.36 30.076c-10.665 150.601-83.43 276.096-182.61 327.27L639.831 960h25.721l-34.157-64.987c129.104-55.465 221.024-198.199 221.024-365.607z"
                    fill="#030504" p-id="53676"></path>
                <path
                    d="M873.999 520.527c0 9.472-7.674 17.141-17.147 17.141h-689.7C157.68 537.668 150 530 150 520.527c0-9.486 7.68-17.152 17.152-17.152h689.7c9.473-0.001 17.147 7.666 17.147 17.152z"
                    fill="#FF3B30" p-id="53677"></path>
            </g>
            <path d="M1198.611692 1023.488H5.454769v-351.310769h1193.156923v351.310769z" fill="#FF3A2F" p-id="2828">
            </path>
            <path
                d="M1044.972308 672.177231v41.531077c0 134.734769-109.233231 243.948308-243.968 243.948307H5.474462v65.851077h1193.156923v-351.310769h-153.659077z"
                fill="#000000" opacity=".35" p-id="2829"></path>
        </svg>
        <div class="open-box" :style="{ 'display': openTip? 'block': 'none' }">
            {{ name || '减肥' }}
        </div>

    </div>
</template>

<style scoped lang='less'>
@keyframes scale {
    0%{
        transform: scale(.3);
    }
    40%{
        transform: scale(.6);
    }
    80%{
        transform: scale(1.2);
    }
    100%{
        transform: scale(1);
    }
}
.container {
    position: absolute;
    z-index: 10;
    width: 100%;
    height: 100%;
    background-image: url(/src/img/bg.webp);
    background-color: #fff;
    background-size: 100% 100%;
    display: grid;

    .close{
        position: absolute;
        right: 5%;
        top: 5%;
        color: #000;
        font-size: 32px;
    }

    .icon {
        width: 50%;
        align-self: center;
        justify-self: center;
        &.unopen{
            animation: scale .4s ease-in;
        }
        &.opened{
            display: none
        }
    }
    .open-box{
        position: absolute;
        left: calc(25% - 50px);
        top: 40%;
        background: #ffdfdf;
        padding: 20px;
        border-radius: 100px;
        box-shadow: 1px 0 10px #efefef;
        animation: scale .4s ease-in;
        display: none;
        &::before{
            content: '';
            display: inline-block;
            width: 0;
            height: 0;
            border-top: 10px solid #ffdfdf;
            border-right: 20px solid #ffdfdf;
            position: absolute;
            bottom: 4px;
            left: calc(100% - 24px);
            transform: rotate(-10deg);
        }
    }
}
</style>