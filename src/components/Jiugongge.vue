<script setup lang="ts">
import { onMounted, ref, watch, watchEffect } from 'vue'
import type { menu } from '../type/index'

const emit = defineEmits<{
    changeName: [name: 'Jiugongge' | 'Blindbox' | 'Custom']
}>()

const props = defineProps<{
    localData: menu[]
}>()


const menuData = ref<menu[]>([])

const randomChoose = () => {
    emit('changeName', 'Blindbox')
}

const isDisplay = ref<boolean>(false)

watchEffect(() => {
    if(props.localData?.length){
        isDisplay.value = true
        menuData.value = props.localData
    }
})


const goDiy = () => {
    emit('changeName', 'Custom')
}

const currentIndex = ref<number>(0)
const chooseBlindbox = (i: number) => {

}

</script>

<template>
    <div class="jiugongge">
        <template v-if="isDisplay">
            <div class="inner">
                <div class="item" v-for="item, index in menuData">
                    <span class="item-index">{{ index }}</span>
                    <svg v-if="!item.opened" @click="chooseBlindbox(index)" t="1716106589997" class="icon icon-Unopened" viewBox="0 0 1201 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2824" width="48" height="48"><path d="M1109.267692 698.722462c-9.216-272.285538-232.704-490.200615-507.214769-490.200616-274.530462 0-498.018462 217.915077-507.254154 490.200616h1014.488616z" fill="#0CB04A" p-id="2825"></path><path d="M255.094154 503.532308a19.849846 19.849846 0 0 1-17.979077-28.416c58.486154-123.470769 184.497231-203.224615 321.024-203.224616a19.889231 19.889231 0 0 1 0 39.778462c-121.225846 0-233.137231 70.833231-285.065846 180.48a19.889231 19.889231 0 0 1-17.979077 11.362461z" fill="#EDEDED" p-id="2826"></path><path d="M660.578462 211.987692a510.168615 510.168615 0 0 1 158.700307 145.762462c81.624615 115.554462-0.118154 275.121231-141.607384 275.121231H101.474462c-3.564308 21.543385-5.907692 43.480615-6.675693 65.851077h1014.488616c-8.566154-252.632615-201.629538-458.338462-448.708923-486.73477z" fill="#000000" opacity=".35" p-id="2827"></path><path d="M1198.611692 1023.488H5.454769v-351.310769h1193.156923v351.310769z" fill="#FF3A2F" p-id="2828"></path><path d="M1044.972308 672.177231v41.531077c0 134.734769-109.233231 243.948308-243.968 243.948307H5.474462v65.851077h1193.156923v-351.310769h-153.659077z" fill="#000000" opacity=".35" p-id="2829"></path><path d="M708.135385 106.082462a106.082462 106.082462 0 1 1-212.184616 0 106.082462 106.082462 0 0 1 212.164923 0z" fill="#142A3B" p-id="2830"></path><path d="M585.038769 84.125538a26.899692 26.899692 0 1 1-53.779692 0 26.899692 26.899692 0 0 1 53.76 0z" fill="#EDEDED" p-id="2831"></path><path d="M625.486769 2.796308c23.473231 19.456 38.734769 48.462769 38.734769 81.32923a106.082462 106.082462 0 0 1-106.082461 106.082462c-8.073846 0-15.872-1.083077-23.433846-2.796308 18.353231 15.222154 41.629538 24.733538 67.347692 24.733539A105.984 105.984 0 1 0 625.486769 2.796308z" fill="#000000" opacity=".35" p-id="2832"></path></svg>
                    <svg v-else t="1716107260647" class="icon icon-opened" viewBox="0 0 1344 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7819" width="48" height="48"><path d="M1216 832a64 64 0 0 1 0 128H128a64 64 0 1 1 0-128h1088m0-64H128a128 128 0 0 0 0 256h1088a128 128 0 0 0 0-256z" fill="#bfbfbf" p-id="7820"></path><path d="M672 352c248.338028 0 457.239437 177.938028 502.279812 416H169.720188c45.070423-238.061972 253.896714-416 502.279812-416m0-64c-307.305164 0-557.686385 240.856338-574.377465 544h1148.75493C1229.686385 528.856338 979.305164 288 672 288z" fill="#bfbfbf" p-id="7821"></path><path d="M672 64a96 96 0 1 1-96 96 96.150235 96.150235 0 0 1 96-96m0-64a160 160 0 1 0 160 160A160 160 0 0 0 672 0zM960.030047 640a31.924883 31.924883 0 0 1-25.630047-12.8c-84.492019-112.676056-193.968075-115.2-198.580282-115.2a32 32 0 0 1 0.180282-64c5.874178 0 145.186854 1.592488 249.6 140.8a32.015023 32.015023 0 0 1-25.539906 51.2z" fill="#bfbfbf" p-id="7822"></path></svg>
                </div>
            </div>
            <div class="choose" @click="randomChoose">随机选盒</div>
        </template>
        <template v-else>
            <el-empty :image-size="80" description="还没有菜单哦~">
                <template #image>
                    <svg t="1716122705699" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="16966" width="60" height="60"><path d="M904.045714 374.491429c-8.777143 35.108571-17.554286 58.514286-17.554285 58.514285s40.96 336.457143 26.331428 397.897143c-8.777143 40.96-20.48 32.182857-52.662857 32.182857s-73.142857 8.777143-78.994286-35.108571c-5.851429-67.291429 73.142857-342.308571 35.108572-359.862857-29.257143-14.628571-40.96-2.925714-67.291429-43.885715-40.96-64.365714 35.108571-280.868571 128.731429-354.011428h-5.851429c-96.548571 0-251.611429 313.051429-198.948571 389.12 29.257143 40.96 81.92 46.811429 131.657143 49.737143 0 0-40.96 318.902857-32.182858 392.045714 2.925714 43.885714 49.737143 61.44 81.92 61.44 32.182857 0 67.291429-17.554286 73.142858-58.514286 11.702857-61.44-26.331429-409.6-26.331429-409.6-2.925714 0 0-52.662857 2.925714-119.954285z m0 0" fill="#1296DB" p-id="16967"></path><path d="M854.308571 983.04c-23.405714 0-46.811429-5.851429-64.365714-17.554286-23.405714-14.628571-38.034286-35.108571-40.96-61.44-5.851429-64.365714 20.48-301.348571 32.182857-374.491428-46.811429-5.851429-96.548571-14.628571-125.805714-58.514286-17.554286-26.331429-17.554286-67.291429-2.925714-122.88 11.702857-46.811429 35.108571-102.4 64.365714-152.137143 23.405714-40.96 46.811429-76.068571 73.142857-99.474286 29.257143-29.257143 58.514286-46.811429 84.845714-46.811428 2.925714 0 29.257143 0 49.737143 17.554286 5.851429 8.777143 11.702857 23.405714 11.702857 38.034285 0 2.925714-2.925714 46.811429-14.628571 362.788572v23.405714c5.851429 43.885714 40.96 351.085714 26.331429 415.451429-5.851429 23.405714-17.554286 43.885714-35.108572 58.514285-17.554286 11.702857-38.034286 17.554286-58.514286 17.554286z m17.554286-892.342857c-26.331429 0-70.217143 38.034286-119.954286 122.88-58.514286 105.325714-78.994286 204.8-61.44 234.057143 20.48 32.182857 64.365714 35.108571 111.177143 40.96h5.851429c5.851429 0 11.702857 2.925714 14.628571 8.777143 2.925714 5.851429 5.851429 8.777143 5.851429 14.628571 0 2.925714-40.96 318.902857-32.182857 386.194286 0 11.702857 8.777143 23.405714 20.48 29.257143 11.702857 5.851429 26.331429 11.702857 40.96 11.702857 14.628571 0 43.885714-2.925714 52.662857-40.96 8.777143-49.737143-17.554286-307.2-29.257143-403.748572v-2.925714-26.331429c8.777143-234.057143 14.628571-354.011429 14.628571-359.862857 0-5.851429-2.925714-8.777143-2.925714-8.777143-8.777143-2.925714-17.554286-5.851429-20.48-5.851428z m0 0" fill="#443421" p-id="16968"></path><path d="M447.634286 163.84c-5.851429-26.331429-8.777143-58.514286-38.034286-58.514286 0 2.925714-38.034286 257.462857-35.108571 260.388572 0 0 2.925714-23.405714-14.628572 40.96-14.628571 55.588571-5.851429 52.662857-49.737143 67.291428-29.257143 8.777143 46.811429 245.76 29.257143 362.788572-8.777143 58.514286-43.885714 64.365714-61.44 64.365714-20.48 0-52.662857-8.777143-58.514286-64.365714-17.554286-119.954286 55.588571-356.937143 26.331429-365.714286-55.588571-14.628571-96.548571-43.885714-114.102857-99.474286-17.554286-61.44 11.702857-254.537143 11.702857-254.537143v-11.702857c-26.331429 0-32.182857 32.182857-38.034286 58.514286 0 0-29.257143 193.097143-11.702857 257.462857 14.628571 55.588571 76.068571 84.845714 134.582857 87.771429 0 0-40.96 315.977143-35.108571 374.491428 8.777143 73.142857 61.44 76.068571 81.92 76.068572 17.554286 0 73.142857 0 81.92-76.068572 5.851429-58.514286-35.108571-374.491429-35.108572-374.491428 61.44-5.851429 119.954286-32.182857 134.582858-87.771429 20.48-64.365714-8.777143-257.462857-8.777143-257.462857z m0 0" fill="#1296DB" p-id="16969"></path><path d="M286.72 983.04h-5.851429c-11.702857 0-32.182857 0-55.588571-11.702857-26.331429-14.628571-43.885714-40.96-46.811429-81.92-5.851429-52.662857 23.405714-283.794286 32.182858-359.862857-26.331429-5.851429-52.662857-11.702857-73.142858-26.331429-32.182857-17.554286-52.662857-43.885714-61.44-76.068571-17.554286-70.217143 11.702857-257.462857 11.702858-266.24v-2.925715c5.851429-11.702857 8.777143-29.257143 17.554285-43.885714 11.702857-20.48 29.257143-29.257143 49.737143-29.257143 14.628571 0 38.034286 8.777143 49.737143 46.811429 2.925714 14.628571 2.925714 32.182857 2.925714 35.108571V263.314286c0 5.851429 2.925714 8.777143 8.777143 8.777143 2.925714 0 5.851429-2.925714 5.851429-2.925715L236.982857 117.028571c0-43.885714 73.142857-58.514286 76.068572-11.702857l29.257142 163.84c2.925714 2.925714 2.925714 2.925714 5.851429 2.925715 5.851429 0 8.777143-2.925714 8.777143-8.777143V166.765714c0-2.925714 0-17.554286 5.851428-35.108571 11.702857-38.034286 35.108571-43.885714 49.737143-46.811429 23.405714 0 40.96 8.777143 49.737143 29.257143 5.851429 14.628571 8.777143 29.257143 11.702857 43.885714v2.925715c0 8.777143 29.257143 198.948571 11.702857 266.24-8.777143 32.182857-29.257143 58.514286-61.44 76.068571-20.48 11.702857-43.885714 20.48-73.142857 26.331429 8.777143 76.068571 38.034286 307.2 32.182857 359.862857-2.925714 61.44-38.034286 93.622857-96.548571 93.622857zM134.582857 169.691429c-8.777143 52.662857-26.331429 198.948571-11.702857 251.611428 14.628571 61.44 93.622857 70.217143 117.028571 73.142857 5.851429 0 11.702857 2.925714 14.628572 8.777143 2.925714 5.851429 5.851429 8.777143 5.851428 14.628572-11.702857 87.771429-40.96 324.754286-35.108571 371.565714 5.851429 55.588571 40.96 55.588571 58.514286 55.588571 35.108571 0 55.588571-17.554286 58.514285-55.588571 5.851429-46.811429-23.405714-283.794286-35.108571-371.565714 0-5.851429 0-11.702857 5.851429-14.628572 2.925714-5.851429 8.777143-5.851429 14.628571-8.777143 23.405714-2.925714 99.474286-11.702857 117.028571-73.142857 14.628571-49.737143-2.925714-198.948571-11.702857-251.611428v-2.925715c-2.925714-11.702857-2.925714-23.405714-8.777143-32.182857-2.925714-5.851429-5.851429-5.851429-8.777142-5.851428-5.851429 0-11.702857 20.48-11.702858 38.034285V263.314286c0 26.331429-23.405714 49.737143-52.662857 49.737143-23.405714 0-43.885714-14.628571-49.737143-35.108572v-5.851428L295.497143 117.028571c0-8.777143-14.628571-11.702857-14.628572-11.702857-8.777143 0-14.628571 2.925714-14.628571 11.702857l2.925714 155.062858v5.851428c-5.851429 20.48-26.331429 35.108571-49.737143 35.108572-29.257143 0-52.662857-23.405714-52.662857-49.737143V166.765714c0-17.554286-5.851429-38.034286-11.702857-38.034285-2.925714 0-5.851429 0-8.777143 5.851428-5.851429 5.851429-8.777143 20.48-11.702857 35.108572z m0 0" fill="#443421" p-id="16970"></path></svg>
                </template>
                <el-button type="primary" @click="goDiy">diy菜单盲盒</el-button>
            </el-empty>
        </template>
    </div>
</template>

<style scoped lang="less">
    .jiugongge{
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        .inner{
            width: 50%;
            display: flex;
            flex-wrap: wrap;
            background: seagreen;
            border: 2px solid #ccc;
            .item{
                width: 33.333%;
                height: 0;
                padding-top: calc(33.333% - 4px); 
                position: relative;
                border: 2px solid #ccc;
                box-sizing: border-box;
                .item-index{
                    position: absolute;
                    top: 0;
                    font-size: 12px;
                    background-color: yellow;
                    padding: 0 2px;
                }
                .icon{
                    position: absolute;
                    width: 80%;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    top: 0;
                    margin: auto;
                }
                
            }
        }
        .choose{
            margin-top: 30px;
            background-color: #f30101;
            color: #fff;
            font-size: 14px;
            line-height: 30px;
            padding: 0 20px;
            border-radius: 30px;
        }
    }
</style>