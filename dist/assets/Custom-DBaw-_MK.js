import{d as E,r as d,o as c,c as k,f,m as n,a as i,F as C,k as T,i as g,q as v,t as J,u as V,s as S,v as M,x as O,y as D,z as F,A as K,B as L,C as b,D as p}from"./index-DJxcpmTz.js";const R=i("div",{class:"card-header"},[i("span",null,"自定义菜单")],-1),U={class:"flex gap-2"},q=i("div",{class:"card-header"},[i("span",null,"隐藏款")],-1),A={class:"flex gap-2"},H=E({__name:"Custom",emits:["changeName","update"],setup($,{emit:w}){const h=w,r=d(""),e=d(["油泼面","刀削面"]),m=d(!1),_=d(),a=d(""),z=l=>{e.value.splice(e.value.indexOf(l),1)},I=()=>{m.value=!0,O(()=>{_.value.input.focus()})},y=()=>{r.value&&e.value.push(r.value),m.value=!1,r.value=""},N=()=>{if(e.value.length<9)return b({message:p("p",{style:"line-height: 1; font-size: 14px"},[p("span",null,"就没啥想吃的嘛，至少得凑凑9个吧")])}),!1;if(e.value.length>9)return b({message:p("p",{style:"line-height: 1; font-size: 14px"},[p("span",null,"太多啦太多啦，咱只能放9个")])}),!1;const l=new Set(e.value);if(a.value){if(l.add(a.value),l.size<10)return!1}else if(l.size<9)return!1;return!0},B=()=>{if(!N())return;const o=D.service({lock:!0,text:"生成ing~",background:"rgba(0, 0, 0, 0.7)"});let t=[];if(t=e.value.map(u=>({name:u,opened:!1})),localStorage.setItem("regulardata",JSON.stringify(t)),a.value&&Math.floor(Math.random()*100)>95&&t.push({name:a.value,opened:!1,special:!0}),a.value){const u=[{name:a.value,opened:!1}];localStorage.setItem("hide",JSON.stringify(u))}localStorage.setItem("data",JSON.stringify(t)),o.close(),h("changeName","Jiugongge"),h("update",t)};return(l,o)=>{const t=F,u=K,x=L;return c(),k(C,null,[f(x,{style:{width:"80%",margin:"20px auto"}},{header:n(()=>[R]),default:n(()=>[i("div",U,[(c(!0),k(C,null,T(e.value,s=>(c(),g(t,{key:s,closable:"","disable-transitions":!1,onClose:j=>z(s)},{default:n(()=>[v(J(s),1)]),_:2},1032,["onClose"]))),128)),m.value?(c(),g(V(S),{key:0,ref_key:"InputRef",ref:_,modelValue:r.value,"onUpdate:modelValue":o[0]||(o[0]=s=>r.value=s),class:"w-20",size:"small",onKeyup:M(y,["enter"]),onBlur:y},null,8,["modelValue"])):(c(),g(u,{key:1,class:"button-new-tag",size:"small",onClick:I},{default:n(()=>[v(" + 添加菜单 ")]),_:1}))])]),_:1}),f(x,{style:{width:"80%",margin:"0px auto 20px"}},{header:n(()=>[q]),default:n(()=>[i("div",A,[f(V(S),{modelValue:a.value,"onUpdate:modelValue":o[1]||(o[1]=s=>a.value=s),size:"small"},null,8,["modelValue"])])]),_:1}),f(u,{style:{margin:"0 auto",display:"block"},onClick:B},{default:n(()=>[v("生成菜单")]),_:1})],64)}}});export{H as default};
